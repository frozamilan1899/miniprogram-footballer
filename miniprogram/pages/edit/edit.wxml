<!--edit.wxml-->

<view class="container">
  <view class="page-body">
    <view class="btns">
      <van-button disabled="{{expired}}" type="primary" bindtap="submitMatchInfo">{{publishText}}</van-button>
      <text></text>
      <van-button disabled="{{publishNewMatch || expired}}" type="default" open-type="share">转发比赛</van-button>
    </view>

    <van-field disabled="{{subjectDisabled}}" value="{{matchInfo.subject}}" label="比赛主题" type="textarea" placeholder="请输入比赛主题" autosize clearable="{{true}}" required="{{true}}" bindinput='getSubjectInput' />

    <van-field disabled="{{true}}" label="比赛时间" value="{{matchInfo.time}}" required="{{true}}">
      <view slot="button">
        <picker mode="multiSelector" bindchange="bindStartMultiPickerChange" bindtap='pickerTap' bindcolumnchange="bindMultiPickerColumnChange" value="{{multiIndex}}" range="{{multiArray}}">
          <van-button hidden="{{timeDisabled}}" plain hairline type="primary" size="mini"> 选择日期和时间 </van-button>
        </picker>
      </view>
    </van-field>

    <van-field label="报名列表" hidden="{{expired}}" placeholder="请报名" bindinput='getSUInput' />
    <view wx:for="{{matchInfo.signUpList}}" wx:key="key" wx:for-item="item" data-index="{{index}}">
      <text>{{index+1}}.{{item.content}}</text>
    </view>


    <van-field label="请假列表" hidden="{{expired}}" placeholder="请假" bindinput='getAFLInput' />
    <view wx:for="{{matchInfo.askForLeaveList}}" wx:key="key" wx:for-item="item" data-index="{{index}}">
      <text>{{index+1}}.{{item.content}}</text>
    </view>

    <van-button hidden="{{locationDisabled}}" type="primary" bindtap="chooseLocation" size="large">选取比赛位置</van-button>
    <text>场地名称：{{matchInfo.location.name}}\n</text>
    <text>场地地址：{{matchInfo.location.address}}\n</text>
    <map id="map" longitude="{{matchInfo.location.longitude}}" latitude="{{matchInfo.location.latitude}}" scale="14" markers="{{markers}}" show-compass="true" enable-zoom="false"></map>
    <van-button type="primary" bindtap="openLocation" size="large">查看位置详情</van-button>
  </view>
</view>