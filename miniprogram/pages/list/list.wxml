<!--list.wxml-->

<view class="container">
  <view class="page-body">
    <van-notify id="van-notify" />
    <van-dialog id="van-dialog" />

    <view class="userInfo">
      <view class="userAvatar">
        <open-data type="userAvatarUrl"></open-data>
      </view>
      <open-data type="userNickName"></open-data>
    </view>

    <van-button type="primary" size="large" bind:click="toEditPage"> 新比赛 </van-button>

    <view class="skeleton" hidden="{{dataLoaded}}">
      <van-skeleton title row="4" loading="{{!dataLoaded}}" />
    </view>
    <view class="skeleton" hidden="{{dataLoaded}}">
      <van-skeleton title row="4" loading="{{!dataLoaded}}" />
    </view>

    <van-cell-group wx:if="{{matches.length}}" title="近期参与过的所有比赛">
      <van-swipe-cell right-width="{{65}}" wx:for="{{matches}}" wx:key="key" wx:for-item="item" data-index="{{index}}" async-close bind:close="onClose">
        <van-cell center is-link="{{!item.hasNewMatchInfo}}" border clickable title="比赛主题：{{item.subject}}" use-label-slot="{{true}}" url="../edit/edit?id={{item._id}}">
          <view slot="right-icon">
            <view hidden="{{!item.hasNewMatchInfo}}">
              <van-tag round type="danger">new</van-tag>
            </view>
          </view>
          <view slot="label">
            <view>比赛时间：{{item.showTime}}</view>
            <view>报名人数：{{item.signUpList.length}}人</view>
            <view>请假人数：{{item.askForLeaveList.length}}人</view>
            <view>比赛地点：{{item.location.name}}（{{item.location.address}}）</view>
          </view>
        </van-cell>
        <view slot="right" class="van-swipe-cell__right">删除</view>
      </van-swipe-cell>
    </van-cell-group>

    <van-divider wx:if="{{matches.length}}" contentPosition="center">因为足球，所以美丽</van-divider>
    <van-divider wx:else contentPosition="center">同城聚英豪，绿茵显英姿</van-divider>
  </view>
</view>